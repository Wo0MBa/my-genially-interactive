<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Создай персонажа</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #000;
      color: #fff;
      padding: 20px;
      margin: 0;
    }
    .container {
      max-width: 600px;
      margin: 0 auto;
      background: #111;
      padding: 20px;
      border-radius: 10px;
    }
    input {
      width: 100%;
      padding: 10px;
      margin: 10px 0;
      background: #222;
      border: 1px solid #00aaff;
      border-radius: 5px;
      color: #fff;
    }
    button {
      width: 100%;
      padding: 12px;
      background: #00aaff;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      margin: 15px 0;
    }
    textarea {
      width: 100%;
      height: 150px;
      background: #222;
      color: #fff;
      border: 1px solid #00aaff;
      border-radius: 5px;
      padding: 10px;
      font-family: monospace;
    }
  </style>
</head>
<body>
  <div class="container">
    <h2>Создай персонажа</h2>
    
    <label>URL изображения:</label>
    <input type="url" id="imgUrl" placeholder="https://example.com/image.png">
    
    <label>Слова (через пробел):</label>
    <input type="text" id="wordsInput" placeholder="Твори Верь Мечтай">
    
    <button onclick="generateIframe()">Сгенерировать код</button>
    
    <textarea id="iframeCode" readonly></textarea>
  </div>

  <script>
    function generateIframe() {
      const imgUrl = document.getElementById('imgUrl').value.trim();
      const wordsInput = document.getElementById('wordsInput').value.trim();
      
      if (!imgUrl) {
        alert("Введите URL изображения");
        return;
      }
      if (!wordsInput) {
        alert("Введите хотя бы одно слово");
        return;
      }

      const words = wordsInput.split(/\s+/).filter(w => w.length > 0);
      
      // Простой HTML для iframe
      let itemsHtml = '';
      words.forEach((word, index) => {
        itemsHtml += `
<div class="item" style="position:relative;display:inline-block;margin:20px;width:120px;height:200px;">
  <div class="image" style="width:60px;height:100px;cursor:pointer;background:url('${imgUrl}') center/contain no-repeat;transition:all 2s;" 
       onclick="this.style.width='120px';this.style.height='200px';setTimeout(()=>{this.style.opacity='0';this.nextSibling.style.display='block'},2000)">
  </div>
  <div style="display:none;font-weight:bold;color:#000;background:#FFA500;padding:10px;border-radius:5px;margin-top:10px;">
    ${word}
  </div>
</div>`;
      });

      const html = `
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <style>
    body { margin:0; padding:20px; background:transparent; }
  </style>
</head>
<body>
  <div style="text-align:center;">
    ${itemsHtml}
  </div>
</body>
</html>`;

      const escapedHtml = html
        .replace(/"/g, '&quot;')
        .replace(/'/g, '&#39;')
        .replace(/</g, '<')
        .replace(/>/g, '>');

      const iframeCode = `<iframe srcdoc="${escapedHtml}" width="800" height="400" frameborder="0"></iframe>`;
      
      document.getElementById('iframeCode').value = iframeCode;
      
      // Копируем в буфер
      navigator.clipboard?.writeText(iframeCode).catch(() => {
        document.getElementById('iframeCode').select();
        document.execCommand('copy');
      });
      
      alert("Код скопирован!");
    }
  </script>
</body>
</html>
