<!DOCTYPE html>
<html>
<head>
    <title>Генератор персонажей</title>
</head>
<body>
    <div style="padding:20px;font-family:Arial;">
        <h2>Создай персонажа</h2>
        
        <p><label>URL картинки:</label><br>
        <input type="url" id="imgUrl" style="width:400px;" value="https://i.pinimg.com/originals/fc/a7/66/fca766643693b021645b276bd61ad09e.png"></p>
        
        <p><label>Слова через пробел:</label><br>
        <input type="text" id="words" style="width:400px;" value="Твори Верь Мечтай"></p>
        
        <button onclick="generate()">Сгенерировать код</button>
        
        <p><label>Код для вставки:</label><br>
        <textarea id="result" style="width:500px;height:200px;"></textarea></p>
    </div>

    <script>
        function generate() {
            const imgUrl = document.getElementById('imgUrl').value;
            const words = document.getElementById('words').value.split(' ').filter(w => w);
            
            if (!imgUrl || words.length === 0) {
                alert('Заполните все поля');
                return;
            }

            // Создаем HTML для iframe
            let html = `<!DOCTYPE html>
<html>
<head>
    <style>
        body { margin:20px; text-align:center; background:transparent; }
        .item { display:inline-block; margin:20px; }
        .img { width:60px; height:100px; cursor:pointer; background:url('${imgUrl}') center/contain no-repeat; }
        .img:hover { opacity:0.8; }
        .text { display:none; font-weight:bold; color:#000; background:#FFA500; padding:10px; margin-top:10px; border-radius:5px; }
    </style>
</head>
<body>
`;
            
            words.forEach(word => {
                html += `    <div class="item">
        <div class="img" onclick="this.style.width='120px';this.style.height='200px';setTimeout(()=>{this.style.display='none';this.nextSibling.style.display='block'},1000)"></div>
        <div class="text">${word}</div>
    </div>
`;
            });
            
            html += `</body>
</html>`;

            // Экранируем для srcdoc
            const escaped = html
                .replace(/"/g, '&quot;')
                .replace(/'/g, '&#39;')
                .replace(/</g, '<')
                .replace(/>/g, '>');

            const iframeCode = `<iframe srcdoc="${escaped}" width="600" height="400" frameborder="0"></iframe>`;
            
            document.getElementById('result').value = iframeCode;
            
            // Копируем в буфер
            navigator.clipboard.writeText(iframeCode).catch(() => {
                document.getElementById('result').select();
                document.execCommand('copy');
            });
            
            alert('Код скопирован!');
        }
    </script>
</body>
</html>
