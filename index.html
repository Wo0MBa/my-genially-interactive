<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Генератор iframe для Genially</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
      color: white;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1000px;
      margin: 0 auto;
      background: rgba(0, 0, 0, 0.7);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 0 30px rgba(0, 255, 0, 0.3);
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
      font-size: 2.5rem;
      color: #4CAF50;
      text-shadow: 0 0 10px rgba(76, 175, 80, 0.5);
    }

    .form-group {
      margin-bottom: 25px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-size: 1.2rem;
      color: #4CAF50;
    }

    input, textarea {
      width: 100%;
      padding: 15px;
      border-radius: 8px;
      border: 2px solid #4CAF50;
      background: rgba(0, 0, 0, 0.5);
      color: white;
      font-size: 1.1rem;
    }

    textarea {
      min-height: 120px;
      resize: vertical;
    }

    button {
      background: linear-gradient(to right, #4CAF50, #8BC34A);
      color: white;
      border: none;
      padding: 15px 30px;
      font-size: 1.2rem;
      border-radius: 8px;
      cursor: pointer;
      display: block;
      margin: 30px auto;
      font-weight: bold;
      transition: all 0.3s ease;
      box-shadow: 0 0 15px rgba(76, 175, 80, 0.5);
    }

    button:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 20px rgba(76, 175, 80, 0.7);
    }

    .result-container {
      background: rgba(0, 0, 0, 0.5);
      border-radius: 8px;
      padding: 20px;
      margin-top: 30px;
      border: 2px solid #4CAF50;
    }

    .result-title {
      color: #4CAF50;
      margin-bottom: 15px;
      font-size: 1.5rem;
    }

    #iframe-code {
      width: 100%;
      min-height: 150px;
      background: black;
      color: #4CAF50;
      padding: 15px;
      border-radius: 8px;
      font-family: monospace;
      font-size: 1rem;
      border: 1px solid #4CAF50;
      overflow: auto;
      white-space: pre-wrap;
    }

    .preview {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 30px;
    }

    .preview-item {
      flex: 1;
      min-width: 300px;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 8px;
      padding: 20px;
      border: 1px solid #4CAF50;
    }

    .preview-title {
      color: #4CAF50;
      margin-bottom: 15px;
      font-size: 1.3rem;
    }

    .word-list {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-top: 10px;
    }

    .word-item {
      background: rgba(76, 175, 80, 0.2);
      padding: 8px 15px;
      border-radius: 20px;
      border: 1px solid #4CAF50;
    }

    .instructions {
      background: rgba(76, 175, 80, 0.2);
      padding: 20px;
      border-radius: 8px;
      margin: 20px 0;
      border-left: 4px solid #4CAF50;
    }

    .instructions h3 {
      color: #4CAF50;
      margin-bottom: 10px;
    }

    .instructions ul {
      padding-left: 20px;
    }

    .instructions li {
      margin-bottom: 8px;
      line-height: 1.5;
    }

    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      .preview {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Генератор iframe для Genially</h1>
    
    <div class="instructions">
      <h3>Инструкция:</h3>
      <ul>
        <li>Введите URL изображения (например, огурца)</li>
        <li>Введите слова через пробел, которые будут появляться после исчезновения изображения</li>
        <li>Количество слов определяет количество изображений с логикой появления, движения и исчезновения</li>
        <li>Нажмите "Сгенерировать iframe код"</li>
        <li>Скопируйте полученный код и вставьте в Genially</li>
      </ul>
    </div>
    
    <div class="form-group">
      <label for="image-url">URL изображения:</label>
      <input type="text" id="image-url" placeholder="https://example.com/image.png" value="https://i.pinimg.com/originals/fc/a7/66/fca766643693b021645b276bd61ad09e.png">
    </div>
    
    <div class="form-group">
      <label for="words">Слова (через пробел):</label>
      <textarea id="words" placeholder="Твори Верь Мечтай Действуй Лети Сияй Измени Побеждай">Твори Верь Мечтай Действуй Лети Сияй Измени Побеждай</textarea>
    </div>
    
    <button id="generate-btn">Сгенерировать iframe код</button>
    
    <div class="result-container">
      <div class="result-title">Сгенерированный iframe код:</div>
      <div id="iframe-code"></div>
    </div>
    
    <div class="preview">
      <div class="preview-item">
        <div class="preview-title">Предпросмотр изображения:</div>
        <img id="image-preview" src="https://i.pinimg.com/originals/fc/a7/66/fca766643693b021645b276bd61ad09e.png" alt="Предпросмотр" style="max-width: 100%; border-radius: 8px;">
      </div>
      
      <div class="preview-item">
        <div class="preview-title">Список слов:</div>
        <div class="word-list" id="word-list">
          <!-- Слова будут добавлены сюда -->
        </div>
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const imageUrlInput = document.getElementById('image-url');
      const wordsInput = document.getElementById('words');
      const generateBtn = document.getElementById('generate-btn');
      const iframeCode = document.getElementById('iframe-code');
      const imagePreview = document.getElementById('image-preview');
      const wordList = document.getElementById('word-list');
      
      // Обновление предпросмотра изображения
      imageUrlInput.addEventListener('input', function() {
        imagePreview.src = this.value;
      });
      
      // Обновление списка слов
      wordsInput.addEventListener('input', updateWordList);
      
      // Инициализация списка слов
      updateWordList();
      
      // Функция обновления списка слов
      function updateWordList() {
        const words = wordsInput.value.trim().split(/\s+/).filter(word => word.length > 0);
        wordList.innerHTML = '';
        
        words.forEach(word => {
          const wordItem = document.createElement('div');
          wordItem.className = 'word-item';
          wordItem.textContent = word;
          wordList.appendChild(wordItem);
        });
      }
      
      // Генерация iframe кода
      generateBtn.addEventListener('click', function() {
        const imageUrl = imageUrlInput.value.trim();
        const words = wordsInput.value.trim().split(/\s+/).filter(word => word.length > 0);
        
        if (!imageUrl) {
          alert('Пожалуйста, введите URL изображения');
          return;
        }
        
        if (words.length === 0) {
          alert('Пожалуйста, введите хотя бы одно слово');
          return;
        }
        
        // Создаем HTML код для iframe
        const htmlContent = generateHtmlContent(imageUrl, words);
        
        // Создаем Data URL
        const dataUrl = `data:text/html;charset=utf-8,${encodeURIComponent(htmlContent)}`;
        
        // Генерируем iframe код
        const iframeCodeText = `<iframe src="${dataUrl}" width="100%" height="600px" frameborder="0"></iframe>`;
        
        // Отображаем код
        iframeCode.textContent = iframeCodeText;
        
        // Выделяем код для удобства копирования
        const range = document.createRange();
        range.selectNodeContents(iframeCode);
        const selection = window.getSelection();
        selection.removeAllRanges();
        selection.addRange(range);
      });
      
      // Функция генерации HTML содержимого
      function generateHtmlContent(imageUrl, words) {
        return `<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Растущие элементы</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: transparent;
      overflow: hidden;
      font-family: 'Arial', sans-serif;
    }

    .element-container {
      position: absolute;
      width: 150px;
      height: 300px;
      display: flex;
      justify-content: center;
      align-items: flex-end;
      pointer-events: none;
      transform: translateZ(0);
      will-change: top, left;
    }

    .element {
      position: absolute;
      bottom: 0;
      width: 60px;
      height: 100px;
      cursor: pointer;
      transition: all 2s cubic-bezier(0.34, 1.56, 0.64, 1);
      transform-origin: bottom center;
      pointer-events: auto;
    }

    .element img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      image-rendering: crisp-edges;
    }

    .growing {
      width: 144px;
      height: 240px;
    }

    .disappearing {
      opacity: 0 !important;
      transform: scale(0.1) !important;
      transition: all 0.8s ease-out !important;
    }

    .text-box {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      background: #FFA500;
      color: #000;
      font-size: 24px;
      font-weight: bold;
      padding: 12px 20px;
      border: 2px solid #fff;
      border-radius: 8px;
      white-space: nowrap;
      box-shadow: 0 0 10px rgba(255, 255, 255, 0.4);
      pointer-events: none;
      text-align: center;
    }
  </style>
</head>
<body>
  <script>
    const words = ${JSON.stringify(words)};
    const containers = [];
    const count = ${words.length};
    const startTop = -100;
    const endTop = 40;
    const totalWidth = 70;
    const margin = 15;
    const step = totalWidth / (count - 1);
    const speed = 0.3;

    document.addEventListener('DOMContentLoaded', function () {
      const body = document.body;

      for (let i = 0; i < count; i++) {
        const left = margin + step * i;

        const container = document.createElement('div');
        container.className = 'element-container';
        container.style.left = \`\${left}%\`;
        container.style.top = \`\${startTop}%\`;
        container.dataset.index = i;
        body.appendChild(container);

        const element = document.createElement('div');
        element.className = 'element';
        element.innerHTML = \`<img src="${imageUrl}" alt="Элемент">\`;
        container.appendChild(element);

        element.moveInterval = null;

        let angle = Math.random() * Math.PI * 2;
        const velocity = {
          x: Math.cos(angle) * speed,
          y: Math.sin(angle) * speed
        };

        containers.push({ element: container, element, velocity });
      }

      setTimeout(startFalling, 500);
    });

    function startFalling() {
      const duration = 1800;
      const interval = 30;
      const steps = duration / interval;
      let currentStep = 0;

      const timer = setInterval(() => {
        currentStep++;
        const progress = Math.min(currentStep / steps, 1);
        const currentTop = startTop + (endTop - startTop) * progress;

        containers.forEach(({ element }) => {
          element.style.top = \`\${currentTop}%\`;
        });

        if (progress >= 1) {
          clearInterval(timer);
          startAllMovement();
        }
      }, interval);
    }

    function startAllMovement() {
      containers.forEach(({ element, element, velocity }) => {
        element.style.top = \`\${endTop}%\`;

        element.moveInterval = setInterval(() => {
          let left = parseFloat(element.style.left) || 0;
          let top = parseFloat(element.style.top) || 0;

          left += velocity.x;
          top += velocity.y;

          if (Math.random() < 0.03) {
            const turn = (Math.random() - 0.5) * 0.3;
            const currentAngle = Math.atan2(velocity.y, velocity.x);
            const newAngle = currentAngle + turn;
            velocity.x = Math.cos(newAngle) * speed;
            velocity.y = Math.sin(newAngle) * speed;
          }

          const minX = 10, maxX = 90;
          const minY = 20, maxY = 70;

          if (left <= minX || left >= maxX) {
            velocity.x *= -1;
            left = left < minX ? minX : maxX;
          }
          if (top <= minY || top >= maxY) {
            velocity.y *= -1;
            top = top < minY ? minY : maxY;
          }

          element.style.left = \`\${left.toFixed(2)}%\`;
          element.style.top = \`\${top.toFixed(2)}%\`;
        }, 100);
      });
    }

    document.body.addEventListener('click', function (e) {
      const element = e.target.closest('.element');
      if (!element || element.classList.contains('clicked')) return;

      const container = element.parentElement;
      const index = parseInt(container.dataset.index);
      if (isNaN(index) || index < 0 || index >= words.length) return;

      element.classList.add('clicked');

      if (element.moveInterval) {
        clearInterval(element.moveInterval);
        element.moveInterval = null;
      }

      element.classList.add('growing');

      setTimeout(() => {
        element.classList.add('disappearing');
      }, 1000);

      setTimeout(() => {
        element.style.display = 'none';

        const textBox = document.createElement('div');
        textBox.className = 'text-box';
        textBox.textContent = words[index];
        container.appendChild(textBox);
      }, 1800);
    });
  </script>
</body>
</html>`;
      }
    });
  </script>
</body>
</html>
